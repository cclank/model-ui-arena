<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>City Weather Card</title>
  <style>
    :root { --bg1:#274e8e; --bg2:#12243f; --text:#f3f8ff; --muted:#cfe0f7; --chip:rgba(255,255,255,.16); }
    * { box-sizing:border-box; }
    body { margin:0; min-height:100vh; display:grid; place-items:center; font-family:"Gill Sans","Segoe UI",sans-serif; color:var(--text);
      background:linear-gradient(140deg,var(--bg1),var(--bg2)); transition:background .45s ease; }
    .card { width:min(94vw,430px); border:1px solid rgba(255,255,255,.3); border-radius:24px; padding:16px; background:rgba(7,16,30,.42);
      backdrop-filter:blur(6px); box-shadow:0 18px 40px rgba(0,0,0,.35); overflow:hidden; }
    .cities { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:14px; }
    .city-btn { border:1px solid rgba(255,255,255,.38); border-radius:999px; color:var(--text); background:rgba(255,255,255,.08); padding:6px 12px; cursor:pointer; font-size:13px; }
    .city-btn.active { background:rgba(255,255,255,.24); border-color:rgba(255,255,255,.7); }
    .sky { position:relative; height:82px; border:1px solid rgba(255,255,255,.2); border-radius:15px; overflow:hidden; margin-bottom:12px; background:rgba(0,0,0,.15); }
    .sun { width:30px; height:30px; border-radius:50%; background:#ffd46b; position:absolute; right:16px; top:16px; box-shadow:0 0 0 8px rgba(255,212,107,.2); animation:spin 10s linear infinite; opacity:0; }
    .cloud { width:78px; height:30px; border-radius:999px; position:absolute; left:16px; top:26px; background:#e3eefb; box-shadow:24px -11px 0 0 #e3eefb; opacity:.95; animation:float 3s ease-in-out infinite; }
    .rain { position:absolute; inset:0; opacity:0; }
    .drop { position:absolute; width:2px; height:12px; border-radius:6px; background:#8ed5ff; animation:rain 1.1s linear infinite; }
    .main { display:flex; justify-content:space-between; align-items:flex-end; gap:12px; }
    .temp { font-size:clamp(42px,14vw,62px); line-height:1; font-family:"Copperplate","Palatino",serif; }
    .desc { color:var(--muted); margin-top:4px; }
    .meta { display:grid; gap:8px; min-width:136px; }
    .chip { border-radius:10px; padding:7px 10px; background:var(--chip); font-size:13px; }
    .trend { margin-top:12px; border:1px solid rgba(255,255,255,.22); border-radius:10px; padding:8px; background:rgba(0,0,0,.14); }
    .trend svg { width:100%; height:54px; }
    .sunny .sun { opacity:1; }
    .cloudy .rain { opacity:0; }
    .rainy .rain { opacity:1; }
    .rainy .sun { opacity:0; }
    @keyframes float { 50% { transform:translateX(6px); } }
    @keyframes spin { to { transform:rotate(360deg); } }
    @keyframes rain { to { transform:translateY(64px); opacity:0; } }
    @media (max-width:390px) { .card{border-radius:18px;padding:13px;} .meta{min-width:120px;} .chip{font-size:12px;} }
  </style>
</head>
<body>
  <section class="card sunny" id="card">
    <div class="cities" id="cities"></div>
    <div class="sky"><div class="sun"></div><div class="cloud"></div><div class="rain" id="rain"></div></div>
    <div class="main">
      <div><div id="cityLabel">杭州</div><div class="temp" id="temp">26°C</div><div class="desc" id="desc">晴朗，体感舒适</div></div>
      <div class="meta"><div class="chip" id="wind">风速 2.9 m/s</div><div class="chip" id="humidity">湿度 46%</div></div>
    </div>
    <div class="trend"><div style="font-size:12px;color:#d7e7fa">今日温度趋势</div><svg viewBox="0 0 260 54" preserveAspectRatio="none"><polyline id="poly" fill="none" stroke="#fff" stroke-width="2.5" points="" /></svg></div>
  </section>
  <script>
    const weather = {
      杭州: { temp: 26, desc: "晴朗，体感舒适", wind: "2.9 m/s", humidity: "46%", type: "sunny", bg: ["#4f92d9", "#1b2d52"], trend: [21, 23, 26, 28, 27, 25] },
      成都: { temp: 17, desc: "小雨，路面湿滑", wind: "3.8 m/s", humidity: "82%", type: "rainy", bg: ["#4f5e7f", "#1e2534"], trend: [18, 18, 17, 16, 17, 17] },
      哈尔滨: { temp: -8, desc: "多云，偏冷", wind: "4.4 m/s", humidity: "61%", type: "cloudy", bg: ["#7991ae", "#2b3648"], trend: [-11, -10, -9, -8, -8, -9] }
    };

    const cities = document.getElementById("cities");
    const card = document.getElementById("card");
    const cityLabel = document.getElementById("cityLabel");
    const temp = document.getElementById("temp");
    const desc = document.getElementById("desc");
    const wind = document.getElementById("wind");
    const humidity = document.getElementById("humidity");
    const poly = document.getElementById("poly");
    const rain = document.getElementById("rain");

    for (let i = 0; i < 18; i += 1) {
      const d = document.createElement("span");
      d.className = "drop"; d.style.left = `${10 + i * 14}px`; d.style.top = `${Math.random() * 10}px`; d.style.animationDelay = `${(i % 6) * 0.18}s`;
      rain.appendChild(d);
    }

    Object.keys(weather).forEach((name) => {
      const b = document.createElement("button");
      b.className = "city-btn"; b.textContent = name;
      b.addEventListener("click", () => render(name));
      cities.appendChild(b);
    });

    function trendToPoints(values) {
      const max = Math.max(...values), min = Math.min(...values);
      return values.map((v, i) => `${8 + (244 / (values.length - 1)) * i},${46 - ((v - min) / Math.max(1, max - min)) * 34}`).join(" ");
    }

    function animateTemp(target) {
      const current = Number(temp.textContent.replace("°C", "")) || 0;
      const step = target > current ? 1 : -1;
      let value = current;
      const id = setInterval(() => {
        if (value === target) return clearInterval(id);
        value += step; temp.textContent = `${value}°C`;
      }, 18);
    }

    function render(city) {
      const data = weather[city];
      document.body.style.background = `linear-gradient(140deg, ${data.bg[0]}, ${data.bg[1]})`;
      card.className = `card ${data.type}`;
      cityLabel.textContent = city; animateTemp(data.temp);
      desc.textContent = data.desc; wind.textContent = `风速 ${data.wind}`; humidity.textContent = `湿度 ${data.humidity}`;
      poly.setAttribute("points", trendToPoints(data.trend));
      [...cities.children].forEach((n) => n.classList.toggle("active", n.textContent === city));
    }

    render("杭州");
  </script>
</body>
</html>
