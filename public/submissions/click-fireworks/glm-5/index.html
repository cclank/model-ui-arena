<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>点击放烟花</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  min-height: 100vh;
  background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
  overflow: hidden;
  cursor: crosshair;
}
.stars {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
.star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: #fff;
  border-radius: 50%;
  animation: twinkle 2s ease-in-out infinite;
}
@keyframes twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}
canvas {
  display: block;
  position: fixed;
  top: 0;
  left: 0;
}
.hint {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  color: rgba(255,255,255,0.5);
  font-family: sans-serif;
  font-size: 14px;
  pointer-events: none;
  text-align: center;
}
.counter {
  position: fixed;
  top: 20px;
  right: 20px;
  color: rgba(255,255,255,0.7);
  font-family: sans-serif;
  font-size: 14px;
}
</style>
</head>
<body>
<div class="stars" id="stars"></div>
<canvas id="canvas"></canvas>
<div class="hint">✨ 点击任意位置放烟花 ✨</div>
<div class="counter">烟花: <span id="count">0</span></div>
<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
// 创建星星背景
const starsContainer = document.getElementById('stars');
for (let i = 0; i < 100; i++) {
  const star = document.createElement('div');
  star.className = 'star';
  star.style.left = Math.random() * 100 + '%';
  star.style.top = Math.random() * 100 + '%';
  star.style.animationDelay = Math.random() * 2 + 's';
  starsContainer.appendChild(star);
}
const particles = [];
const colors = [
  '#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff',
  '#5f27cd', '#00d2d3', '#ff9f43', '#ee5a24', '#c8d6e5'
];
let fireworkCount = 0;
class Particle {
  constructor(x, y, color, velocity, size, type) {
    this.x = x;
    this.y = y;
    this.color = color;
    this.velocity = velocity;
    this.size = size;
    this.alpha = 1;
    this.decay = 0.015 + Math.random() * 0.01;
    this.gravity = 0.05;
    this.type = type;
    this.trail = [];
    this.maxTrail = type === 'spark' ? 5 : 3;
  }
  update() {
    this.trail.push({ x: this.x, y: this.y, alpha: this.alpha });
    if (this.trail.length > this.maxTrail) this.trail.shift();
    this.velocity.y += this.gravity;
    this.x += this.velocity.x;
    this.y += this.velocity.y;
    this.alpha -= this.decay;
    this.size *= 0.98;
  }
  draw() {
    // 绘制尾迹
    this.trail.forEach((point, i) => {
      ctx.save();
      ctx.globalAlpha = point.alpha * (i / this.trail.length) * 0.5;
      ctx.fillStyle = this.color;
      ctx.beginPath();
      ctx.arc(point.x, point.y, this.size * 0.5, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    });
    // 绘制粒子
    ctx.save();
    ctx.globalAlpha = this.alpha;
    ctx.fillStyle = this.color;
    ctx.shadowBlur = 10;
    ctx.shadowColor = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }
}
function createFirework(x, y) {
  fireworkCount++;
  document.getElementById('count').textContent = fireworkCount;
  const particleCount = 60 + Math.floor(Math.random() * 40);
  const baseColor = colors[Math.floor(Math.random() * colors.length)];
  const radius = 2 + Math.random() * 2;
  for (let i = 0; i < particleCount; i++) {
    const angle = (Math.PI * 2 / particleCount) * i;
    const speed = 2 + Math.random() * 4;
    const velocity = {
      x: Math.cos(angle) * speed,
      y: Math.sin(angle) * speed
    };
    particles.push(new Particle(x, y, baseColor, velocity, radius, 'firework'));
  }
  // 添加额外的闪光粒子
  for (let i = 0; i < 20; i++) {
    const angle = Math.random() * Math.PI * 2;
    const speed = 1 + Math.random() * 2;
    particles.push(new Particle(
      x, y,
      '#fff',
      { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed },
      1,
      'spark'
    ));
  }
}
canvas.addEventListener('click', (e) => {
  createFirework(e.clientX, e.clientY);
});
canvas.addEventListener('touchstart', (e) => {
  e.preventDefault();
  const touch = e.touches[0];
  createFirework(touch.clientX, touch.clientY);
});
function animate() {
  ctx.fillStyle = 'rgba(15, 12, 41, 0.2)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  for (let i = particles.length - 1; i >= 0; i--) {
    particles[i].update();
    particles[i].draw();
    if (particles[i].alpha <= 0) {
      particles.splice(i, 1);
    }
  }
  requestAnimationFrame(animate);
}
// 自动放几个烟花作为欢迎
setTimeout(() => createFirework(canvas.width * 0.3, canvas.height * 0.4), 500);
setTimeout(() => createFirework(canvas.width * 0.7, canvas.height * 0.3), 1000);
setTimeout(() => createFirework(canvas.width * 0.5, canvas.height * 0.5), 1500);
animate();
</script>
</body>
</html>
